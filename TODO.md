# TODO

## mediasoup-client-aiortc

* **CRITICAL:** Once the webcam is enabled (or mic?) the Python process remains alive as a xombie process forever.

* Python. Improve logging. Right now I (IÃ±aki) have added a `logger.py` file which exposes `rootLogger`, `debugLogger` and `errorLogger`.
  - Try it by running `DEBUG="-babel *" npm test`.
  - See https://docs.python.org/3/howto/logging.html
  - Logging in Python is a pain.

* DataChannel.
  - No "error" event implemented in aiortc.
  - "message" events generated by aiortc are not wrapped into a `MessageEvent` but, instead, the "message" event is emitted with a `data` argument that may be a string or a binary. Take it into consideration.
  - Let's figure out how to deal with binary messages for sending and receiving, we should encode them somehow to JSON serializable text, i.e. base64.
  - Let's figure out how to deal with `binaryType` stuff (aiortc does not implement it since it just makes sense in JS).

* Use `sourceType` for files and URLs.


## aiortc

Things that must be verified, asked or even reported in aiortc project.

* If `rtcConfiguration` is given without `iceServers` or with empty `iceServers: []`, it fails. This is a BUG in aiortc.
  - Reported: https://github.com/aiortc/aiortc/issues/266

* Must verify max number of SCTP streams (`OS` and `MIS`). For instance it's `OS: 1024, MIS: 1024` in Chrome (cannot renegotiate it later) and `OS: 16, MIS: 2048` in Firefox (which does allow later renegotiation).
  - In https://github.com/aiortc/aiortc/blob/master/src/aiortc/rtcsctptransport.py:
    `MAX_STREAMS = 65535`, and it seems to support renegotiation.

* Must report lack of `track.enabled = xxx` to pause sending RTP (or generate silence or black video with less bitrate).
  - Reported: https://github.com/aiortc/aiortc/issues/264
  - Store the legit track and replace the track `replaceTrack` with the base audio or video track.

* Does only emit 'open' for the first DataChannel.

* Does mandate MaxRetransmits. Providing MaxPacketLifeTime and not the former results in error.
